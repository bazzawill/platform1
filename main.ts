//test commit

namespace SpriteKind {
    export const pickupBullet = SpriteKind.create()
    export const pickupMushroom = SpriteKind.create()
}
// comment to show git push changes
scene.onOverlapTile(SpriteKind.Player, assets.tile`myTile0`, function (sprite, location) {
    // tiles.setWallAt(location, true)
    // tiles.setWallAt(tiles.getTileLocation(4, 12), true)
    if (!(mushroomSpawned)) {
        mushroomSpawned = true
        Mushroom = sprites.create(img`
            . . . . . . b b b b . . . . . . 
            . . . . b b 3 3 3 3 b b . . . . 
            . . . c b 3 3 3 3 1 1 b c . . . 
            . . c b 3 3 3 3 3 1 1 1 b c . . 
            . c c 1 1 1 3 3 3 3 1 1 3 c c . 
            c c d 1 1 1 3 3 3 3 3 3 3 b c c 
            c b d d 1 3 3 3 3 3 1 1 1 b b c 
            c b b b 3 3 1 1 3 3 1 1 d d b c 
            c b b b b d d 1 1 3 b d d d b c 
            . c b b b b d d b b b b b b c . 
            . . c c b b b b b b b b c c . . 
            . . . . c c c c c c c c . . . . 
            . . . . . . b 1 1 b . . . . . . 
            . . . . . . b 1 1 b b . . . . . 
            . . . . . b b d 1 1 b . . . . . 
            . . . . . b d d 1 1 b . . . . . 
            `, SpriteKind.pickupMushroom)
        tiles.placeOnTile(Mushroom, location)
        Mushroom.y -= 32
        // Mushroom.ay = gravity
        tiles.setTileAt(tiles.getTileLocation(4, 12), sprites.dungeon.darkGroundNorthWest0)
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.pickupBullet, function (sprite, otherSprite) {
    bullets += 3
    otherSprite.destroy()
})
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    if (bullets > 0) {
        projectile = sprites.createProjectileFromSprite(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . 1 1 1 1 1 . . . . . . 
            . . . . 1 3 3 3 3 3 1 . . . . . 
            . . . . 1 3 3 3 3 3 1 . . . . . 
            . . . . 1 3 3 3 3 3 1 . . . . . 
            . . . . 1 3 3 3 3 3 1 . . . . . 
            . . . . 1 3 3 3 3 3 1 . . . . . 
            . . . . . 1 1 1 1 1 . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, dude, bulletV, 0)
        projectile.setFlag(SpriteFlag.AutoDestroy, true)
        bullets += -1
    }
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`myTile`, function (sprite, location) {
    if (mushroomActive) {
        dude.ay = -150
        mushroomActive = false
    } else {
        info.changeLifeBy(-1)
        dude.setPosition(21, 87)
    }
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (dude.vy == 0) {
        animation.stopAnimation(animation.AnimationTypes.All, dude)
        dude.vy = -180
    }
})
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    bulletV = -200
    if (mushroomActive) {
        animation.runImageAnimation(
            dude,
            assets.animation`dudeMushroomL`,
            100,
            true
        )
    } else {
        animation.runImageAnimation(
            dude,
            assets.animation`walkLeft`,
            100,
            true
        )
    }
})
function cleanup() {
    enemies = sprites.allOfKind(SpriteKind.Enemy)
    for (let value of enemies) {
        value.destroy()
    }
    for (let ff of sprites.allOfKind(SpriteKind.pickupBullet)) {
        ff.destroy()
    }
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.pickupMushroom, function (sprite, otherSprite) {
    otherSprite.destroy()
    mushroomActive = true
})
scene.onOverlapTile(SpriteKind.Enemy, assets.tile`myTile`, function (sprite, location) {
    sprite.destroy()
    ghosties += -1
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    bulletV = 200
    if (mushroomActive) {
        animation.runImageAnimation(
            dude,
            assets.animation`dudeMushroomR`,
            100,
            true
        )
    } else {
        animation.runImageAnimation(
            dude,
            assets.animation`walkRight`,
            100,
            true
        )
    }
})
function genGhostys() {
    ghosty = sprites.create(img`
        ........................
        ........................
        ........................
        ........................
        ..........ffff..........
        ........ff1111ff........
        .......fb111111bf.......
        .......f11111111f.......
        ......fd11111111df......
        ......fd11111111df......
        ......fddd1111dddf......
        ......fbdbfddfbdbf......
        ......fcdcf11fcdcf......
        .......fb111111bf.......
        ......fffcdb1bdffff.....
        ....fc111cbfbfc111cf....
        ....f1b1b1ffff1b1b1f....
        ....fbfbffffffbfbfbf....
        .........ffffff.........
        ...........fff..........
        ........................
        ........................
        ........................
        ........................
        `, SpriteKind.Enemy)
    ghosty.setPosition(200, 0)
    ghosty.ay = 350
    ghosty.vx = 100
    ghosties += 1
}
sprites.onOverlap(SpriteKind.Projectile, SpriteKind.Enemy, function (sprite, otherSprite) {
    info.changeScoreBy(2)
    otherSprite.destroy()
    if (otherSprite == ghosty) {
        ghosties += -1
    }
})
scene.onOverlapTile(SpriteKind.Player, sprites.dungeon.collectibleInsignia, function (sprite, location) {
    // for (let index = 0; index < 5; index++) {
    // pubullet = sprites.create(img`
    // . . . . . . . . . . . . . . . .
    // . . . . . . . . . . . . . . . .
    // . . . . . . . . . . . . . . . .
    // . . . . . . . . . . . . . . . .
    // . . . . . . . . . . . . . . . .
    // . . . . . 1 1 1 1 1 . . . . . .
    // . . . . 1 3 3 3 3 3 1 . . . . .
    // . . . . 1 3 3 3 3 3 1 . . . . .
    // . . . . 1 3 3 3 3 3 1 . . . . .
    // . . . . 1 3 3 3 3 3 1 . . . . .
    // . . . . 1 3 3 3 3 3 1 . . . . .
    // . . . . . 1 1 1 1 1 . . . . . .
    // . . . . . . . . . . . . . . . .
    // . . . . . . . . . . . . . . . .
    // . . . . . . . . . . . . . . . .
    // . . . . . . . . . . . . . . . .
    // `, SpriteKind.Food)
    // pubullet.setPosition(randint(0, 16 * 16), randint(0, 16 * 16))
    // pubullet.ay = gravity
    // }
    if (level == 0) {
        tiles.setTilemap(tilemap`level2`)
        dude.setPosition(40, 230)
        info.changeScoreBy(10)
        level += 1
        cleanup()
    } else if (level == 1) {
        tiles.setTilemap(tilemap`level3`)
        dude.setPosition(40, 230)
        info.changeScoreBy(10)
        level += 1
        cleanup()
    } else {
        game.over(true)
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    if (mushroomActive) {
        otherSprite.destroy()
        mushroomActive = false
    } else {
        info.changeLifeBy(-1)
        if (level == 1) {
            dude.setPosition(40, 210)
        } else {
            dude.setPosition(21, 0)
        }
    }
})
let level = 0
let ghosty: Sprite = null
let ghosties = 0
let enemies: Sprite[] = []
let mushroomActive = false
let projectile: Sprite = null
let mushroomSpawned = false
let dude: Sprite = null
let bulletV = 0
let bullets = 0
let Mushroom: Sprite = null
game.setDialogFrame(img`
    ..................................................................
    ............fff........fff.............fff..............ffff......
    ...........fddbf......fbdbf...........fbdbf............fbddf......
    ...........fddbbf.....fdddffff........fdddffff...fff..ffddbff.....
    ...........fddddffffffbdddbddbffffffffbdddbddbffffddffddddddf.....
    ...fff....fdddddfddddddddbbddddddddddddddbbddddddfdddddbccddf.....
    .fffddf..fddffffddddddddddbbddddddddddddddbbdddddffbddbbddff......
    .fdbddfffddfffdddfffffbdddbddbffffffffbdddbddbfffefddccbddf.......
    .fdddcddddffeffffeeeeefbdbfddfeeeeeeeefbdbfddfeeeefffcddddf.......
    .fbddcddddfeeeeeeeeeeeefffffffeeeeeeeeefffffffeeeeeeefdddddf......
    ..ffdbbbddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefffffddf.....
    ...fddbcddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeffddfff..
    ....fddccffeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeffddddf.
    ....fdddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefffddddf.
    ...fddbdfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefdfddbbf.
    ...fddfffeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefdfddbf..
    ...ffffeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddfff...
    ....fddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddf....
    ....fddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddf....
    ....fddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddf....
    ...fbddbffeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddf....
    ...fdddddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddf....
    ...fddbddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefbddbff..
    ..ffbbbbffeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefbdddddbf.
    .fbddbddbfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefdddddddf.
    .fdddddddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefbddbddbf.
    .fbdddddbfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeffbbbbff..
    ..ffbddbfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddbddf...
    ....fddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefdddddf...
    ....fddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeffbddbf...
    ....fddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddf....
    ....fddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddf....
    ....fddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddf....
    ....fddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddf....
    ....fddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddf....
    ....fddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddf....
    ...fbddbffeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddf....
    ...fdddddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddf....
    ...fddbddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefbddbff..
    ..ffbbbbffeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefbdddddbf.
    .fbddbddbfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefdddddddf.
    .fdddddddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefbddbddbf.
    .fbdddddbfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeffbbbbff..
    ..ffbddbfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddbddf...
    ....fddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefdddddf...
    ....fddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeffbddbf...
    ....fddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddf....
    ....fddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddf....
    ....fddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddf....
    ...fffddfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeffff...
    ..fbddfdfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefffddf...
    .fbbddfdfeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefdbddf...
    .fddddfffeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefdddf....
    .fddddffeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeffccddf....
    ..fffddffeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddcbddf...
    .....fddfffffeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeefddbbbdff..
    ......fdddddfeeeeeeefffffffeeeeeeeeefffffffeeeeeeeeeeeefddddcddbf.
    .......fddddcfffeeeefddfbdbfeeeeeeeefddfbdbfeeeeeffffeffddddcdddf.
    .......fddbccddfefffbddbdddbffffffffbddbdddbfffffdddfffddfffddbdf.
    ......ffddbbddbffdddddbbddddddddddddddbbddddddddddffffddf..fddfff.
    .....fddccbdddddfddddddbbddddddddddddddbbddddddddfdddddf....fff...
    .....fddddddffddffffbddbdddbffffffffbddbdddbffffffddddf...........
    .....ffbddff..fff...ffffdddf........ffffdddf.....fbbddf...........
    ......fddbf............fbdbf...........fbdbf......fbddf...........
    ......ffff..............fff.............fff........fff............
    ..................................................................
    `)
scene.setBackgroundImage(assets.image`Title screen`)
let textSprite = textsprite.create("My Awesome Game", 0, 5)
textSprite.setOutline(1, 2)
textSprite.setMaxFontHeight(10)
textSprite.setPosition(60, 50)
game.setDialogCursor(img`
    . . . . . . . . . . . . . . . . 
    . . . . . . f f f f . . . . . . 
    . . . . f f f 2 2 f f f . . . . 
    . . . f f f 2 2 2 2 f f f . . . 
    . . f f f e e e e e e f f f . . 
    . . f e e 2 2 2 2 2 2 e f f . . 
    . f f e 2 f f f f f f 2 e f f . 
    . f f f f f e e e e f f f f f . 
    . . f e f b f 4 4 f b f e f . . 
    . . f e 4 1 f d d f 1 4 e f f . 
    . . e f e 4 d d d d 4 e f f d f 
    . . e 4 d d e 2 2 2 2 f e f b f 
    . . . e d d e 2 2 2 2 f 4 f b f 
    . . . . e e f 5 5 4 4 f . f c f 
    . . . . . f f f f f f f . f f . 
    . . . . . . . . . f f f . . . . 
    `)
game.showLongText("Use Arrow keys to move left and right Space to jump and x to shoot", DialogLayout.Bottom)
scene.setBackgroundImage(img`
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    `)
let endlevel = 2
bullets = 3
let gravity = 350
bulletV = 200
info.setScore(0)
scene.setBackgroundColor(9)
info.setLife(3)
tiles.setTilemap(tilemap`level1`)
dude = sprites.create(img`
    . . . . . . f f f f . . . . . . 
    . . . . f f f 2 2 f f f . . . . 
    . . . f f f 2 2 2 2 f f f . . . 
    . . f f f e e e e e e f f f . . 
    . . f f e 2 2 2 2 2 2 e e f . . 
    . . f e 2 f f f f f f 2 e f . . 
    . . f f f f e e e e f f f f . . 
    . f f e f b f 4 4 f b f e f f . 
    . f e e 4 1 f d d f 1 4 e e f . 
    . . f e e d d d d d d e e f . . 
    . . . f e e 4 4 4 4 e e f . . . 
    . . e 4 f 2 2 2 2 2 2 f 4 e . . 
    . . 4 d f 2 2 2 2 2 2 f d 4 . . 
    . . 4 4 f 4 4 5 5 4 4 f 4 4 . . 
    . . . . . f f f f f f . . . . . 
    . . . . . f f . . f f . . . . . 
    `, SpriteKind.Player)
dude.setPosition(21, 216)
scene.cameraFollowSprite(dude)
controller.moveSprite(dude, 100, 0)
dude.ay = gravity
let Sharky = sprites.create(img`
    ................
    ................
    ................
    ................
    .......fff......
    ......fbbf......
    .....fbbcbf.....
    ....fc1bbbf.....
    ...fcc11bbbf....
    ..f31c11bbbf....
    ..f33311bbbf....
    .c1c1311bbbf....
    .c11cc1ffbbf....
    .c111c1ffbbf....
    .c111111bbbcf...
    .cfc11bbbcbccc..
    .fbbbbbccbbccdc.
    fbdbbbbbbcbcbddc
    fdbbbbbccbbcbbdc
    fbbfcbbbbbbccbbf
    fbfdccbbbbbfffbf
    ffddcccbbbcf..ff
    .cddccccccf.....
    ..cdccccccf.....
    ..cdbcccccf.....
    ...cdccccf......
    ...cbccccf......
    ....ccccf.......
    .....fccf.......
    .....fcbfc......
    .....fbbddc.....
    ....fbcbbddc....
    ...fbbccbbbc....
    ..fbbcfffbbbc...
    ..fbff...fcbc...
    ..ff.......cc...
    `, SpriteKind.Enemy)
Sharky.setPosition(345, 150)
Sharky.setBounceOnWall(true)
Sharky.ay = gravity
let Sharky1 = sprites.create(img`
    ................
    ................
    ................
    ................
    .......fff......
    ......fbbf......
    .....fbbcbf.....
    ....fc1bbbf.....
    ...fcc11bbbf....
    ..f31c11bbbf....
    ..f33311bbbf....
    .c1c1311bbbf....
    .c11cc1ffbbf....
    .c111c1ffbbf....
    .c111111bbbcf...
    .cfc11bbbcbccc..
    .fbbbbbccbbccdc.
    fbdbbbbbbcbcbddc
    fdbbbbbccbbcbbdc
    fbbfcbbbbbbccbbf
    fbfdccbbbbbfffbf
    ffddcccbbbcf..ff
    .cddccccccf.....
    ..cdccccccf.....
    ..cdbcccccf.....
    ...cdccccf......
    ...cbccccf......
    ....ccccf.......
    .....fccf.......
    .....fcbfc......
    .....fbbddc.....
    ....fbcbbddc....
    ...fbbccbbbc....
    ..fbbcfffbbbc...
    ..fbff...fcbc...
    ..ff.......cc...
    `, SpriteKind.Enemy)
Sharky1.setPosition(360, 150)
Sharky1.setBounceOnWall(true)
let Ducky = sprites.create(img`
    . . . . . . . . . . b 5 b . . . 
    . . . . . . . . . b 5 b . . . . 
    . . . . . . b b b b b b . . . . 
    . . . . . b b 5 5 5 5 5 b . . . 
    . . . . b b 5 d 1 f 5 d 4 c . . 
    . . . . b 5 5 1 f f d d 4 4 4 b 
    . . . . b 5 5 d f b 4 4 4 4 b . 
    . . . b d 5 5 5 5 4 4 4 4 b . . 
    . . b d d 5 5 5 5 5 5 5 5 b . . 
    . b d d d d 5 5 5 5 5 5 5 5 b . 
    b d d d b b b 5 5 5 5 5 5 5 b . 
    c d d b 5 5 d c 5 5 5 5 5 5 b . 
    c b b d 5 d c d 5 5 5 5 5 5 b . 
    . b 5 5 b c d d 5 5 5 5 5 d b . 
    b b c c c d d d d 5 5 5 b b . . 
    . . . c c c c c c c c b b . . . 
    `, SpriteKind.Enemy)
Ducky.setPosition(455, 240)
// Ducky.setBounceOnWall(true)
Ducky.vx = 100
Ducky.ay = gravity
let pubullet = sprites.create(img`
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . 1 1 1 1 1 . . . . . . 
    . . . . 1 3 3 3 3 3 1 . . . . . 
    . . . . 1 3 3 3 3 3 1 . . . . . 
    . . . . 1 3 3 3 3 3 1 . . . . . 
    . . . . 1 3 3 3 3 3 1 . . . . . 
    . . . . 1 3 3 3 3 3 1 . . . . . 
    . . . . . 1 1 1 1 1 . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    `, SpriteKind.pickupBullet)
pubullet.setPosition(32, 100)
pubullet.ay = gravity
for (let index = 0; index < 5; index++) {
    pubullet = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . 1 1 1 1 1 . . . . . . 
        . . . . 1 3 3 3 3 3 1 . . . . . 
        . . . . 1 3 3 3 3 3 1 . . . . . 
        . . . . 1 3 3 3 3 3 1 . . . . . 
        . . . . 1 3 3 3 3 3 1 . . . . . 
        . . . . 1 3 3 3 3 3 1 . . . . . 
        . . . . . 1 1 1 1 1 . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.pickupBullet)
    pubullet.setPosition(randint(0, 64 * 16), randint(0, 16 * 16))
    pubullet.ay = gravity
}
game.onUpdate(function () {
    if (Ducky.isHittingTile(CollisionDirection.Left)) {
        Ducky.image.flipX()
        Ducky.vx = 100
    }
    if (Ducky.isHittingTile(CollisionDirection.Right)) {
        Ducky.image.flipX()
        Ducky.vx = -100
    }
    if (Ducky.vx == -100) {
        if (Sharky.vy <= 0) {
            Sharky.setImage(img`
                .......fff......
                ......fbbf......
                .....fbbcbf.....
                ....fc1bbbf.....
                ...fcc11bbbf....
                ..f31c11bbbf....
                ..f33311bbbf....
                .c1c1311bbbf....
                .c11cc1ffbbf....
                .c111c1ffbbf....
                .c111111bbbcf...
                .cfc11bbbcbccc..
                .fbbbbbccbbccdc.
                fbdbbbbbbcbcbddc
                fdbbbbbccbbcbbdc
                fbbfcbbbbbbccbbf
                fbfdccbbbbbfffbf
                ffddcccbbbcf..ff
                .cddccccccf.....
                ..cdccccccf.....
                ..cdbcccccf.....
                ...cdccccf......
                ...cbccccf......
                ....ccccf.......
                .....fccf.......
                .....fcbfc......
                .....fbbddc.....
                ....fbcbbddc....
                ...fbbccbbbc....
                ..fbbcfffbbbc...
                ..fbff...fcbc...
                ..ff.......cc...
                `)
        } else {
            Sharky.setImage(img`
                ..ff.......cc...
                ..fbff...fcbc...
                ..fbbcfffbbbc...
                ...fbbccbbbc....
                ....fbcbbddc....
                .....fbbddc.....
                .....fcbfc......
                .....fccf.......
                ....ccccf.......
                ...cbccccf......
                ...cdccccf......
                ..cdbcccccf.....
                ..cdccccccf.....
                .cddccccccf.....
                ffddcccbbbcf..ff
                fbfdccbbbbbfffbf
                fbbfcbbbbbbccbbf
                fdbbbbbccbbcbbdc
                fbdbbbbbbcbcbddc
                .fbbbbbccbbccdc.
                .cfc11bbbcbccc..
                .c111111bbbcf...
                .c111c1ffbbf....
                .c11cc1ffbbf....
                .c1c1311bbbf....
                ..f33311bbbf....
                ..f31c11bbbf....
                ...fcc11bbbf....
                ....fc1bbbf.....
                .....fbbcbf.....
                ......fbbf......
                .......fff......
                `)
        }
    }
    if (Sharky1.vy <= 0) {
        Sharky1.setImage(img`
            .......fff......
            ......fbbf......
            .....fbbcbf.....
            ....fc1bbbf.....
            ...fcc11bbbf....
            ..f31c11bbbf....
            ..f33311bbbf....
            .c1c1311bbbf....
            .c11cc1ffbbf....
            .c111c1ffbbf....
            .c111111bbbcf...
            .cfc11bbbcbccc..
            .fbbbbbccbbccdc.
            fbdbbbbbbcbcbddc
            fdbbbbbccbbcbbdc
            fbbfcbbbbbbccbbf
            fbfdccbbbbbfffbf
            ffddcccbbbcf..ff
            .cddccccccf.....
            ..cdccccccf.....
            ..cdbcccccf.....
            ...cdccccf......
            ...cbccccf......
            ....ccccf.......
            .....fccf.......
            .....fcbfc......
            .....fbbddc.....
            ....fbcbbddc....
            ...fbbccbbbc....
            ..fbbcfffbbbc...
            ..fbff...fcbc...
            ..ff.......cc...
            `)
    } else {
        Sharky1.setImage(img`
            ..ff.......cc...
            ..fbff...fcbc...
            ..fbbcfffbbbc...
            ...fbbccbbbc....
            ....fbcbbddc....
            .....fbbddc.....
            .....fcbfc......
            .....fccf.......
            ....ccccf.......
            ...cbccccf......
            ...cdccccf......
            ..cdbcccccf.....
            ..cdccccccf.....
            .cddccccccf.....
            ffddcccbbbcf..ff
            fbfdccbbbbbfffbf
            fbbfcbbbbbbccbbf
            fdbbbbbccbbcbbdc
            fbdbbbbbbcbcbddc
            .fbbbbbccbbccdc.
            .cfc11bbbcbccc..
            .c111111bbbcf...
            .c111c1ffbbf....
            .c11cc1ffbbf....
            .c1c1311bbbf....
            ..f33311bbbf....
            ..f31c11bbbf....
            ...fcc11bbbf....
            ....fc1bbbf.....
            .....fbbcbf.....
            ......fbbf......
            .......fff......
            `)
    }
    if (game.runtime() <= 100) {
        Sharky1.ay = 350
    }
    if (dude.vx == 0) {
        if (mushroomActive) {
            animation.stopAnimation(animation.AnimationTypes.All, dude)
        } else {
            dude.setImage(img`
                . . . . . . f f f f . . . . . . 
                . . . . f f f 2 2 f f f . . . . 
                . . . f f f 2 2 2 2 f f f . . . 
                . . f f f e e e e e e f f f . . 
                . . f f e 2 2 2 2 2 2 e e f . . 
                . . f e 2 f f f f f f 2 e f . . 
                . . f f f f e e e e f f f f . . 
                . f f e f b f 4 4 f b f e f f . 
                . f e e 4 1 f d d f 1 4 e e f . 
                . . f e e d d d d d d e e f . . 
                . . . f e e 4 4 4 4 e e f . . . 
                . . e 4 f 2 2 2 2 2 2 f 4 e . . 
                . . 4 d f 2 2 2 2 2 2 f d 4 . . 
                . . 4 4 f 4 4 5 5 4 4 f 4 4 . . 
                . . . . . f f f f f f . . . . . 
                . . . . . f f . . f f . . . . . 
                `)
        }
    }
    if (level == 1) {
        if (ghosties == 0) {
            genGhostys()
        } else {
            if (ghosty.x < 16) {
                ghosty.vx = 100
            }
            if (ghosty.x > 240) {
                ghosty.vx = -100
            }
            if (ghosty.vx == 0) {
                ghosty.vx = 100
            }
        }
    }
})
